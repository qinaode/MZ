<html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta charset="utf-8">
    <title></title>
    <link href="/nbc_schoolyard/PUBLIC/css/index.css" rel="stylesheet" type="text/css">
    <script src="/nbc_schoolyard/PUBLIC/js/jquery.1.9.0.min.js"></script>
    <script src="/nbc_schoolyard/PUBLIC/js/script.js"></script>
    <script src="/nbc_schoolyard/PUBLIC/js/iframefit.js"></script>
</head>
<body style="zoom: 1; ">
    <div class="warp1">
        <div class="down">
          <p class="tit2"><span class="inb">知识管理&gt;</span><span class="ino">教学资源</span><!--<span class="inr">分享</span><span class="ine">收藏到书签</span>--></p>
            <div class="top">
                <div class="top-left">
                    <p class="ject">科目</p>
                    <img src="/nbc_schoolyard/PUBLIC/images/images.jpg" class="image">
                    <ul class="ject-ul" id="subject">
                            <li subject_id="1" style="cursor: pointer; border: 1px solid rgb(255, 0, 0); " title="语文"><a>语文</a></li><li subject_id="2" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="数学"><a>数学</a></li><li subject_id="7" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="英语"><a>英语</a></li><li subject_id="8" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="历史"><a>历史</a></li><li subject_id="9" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="地理"><a>地理</a></li><li subject_id="10" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="生物"><a>生物</a></li><li subject_id="11" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="自然"><a>自然</a></li><li subject_id="12" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="社会"><a>社会</a></li>      
                        <input type="hidden" value="1" id="subj">
                    </ul>
                </div>
                <div class="top-cen">
                    <p class="ject">年级</p>
                    <img src="/nbc_schoolyard/PUBLIC/images/images.jpg" class="image">
                    <ul class="ject-ul" id="grade">
                        <li grade_id="1" style="cursor: pointer; border: 1px solid rgb(255, 0, 0); " title="一年级上"><a>一年级上</a></li><li grade_id="2" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="一年级下"><a>一年级下</a></li><li grade_id="5" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="二年级上"><a>二年级上</a></li><li grade_id="8" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="二年级下"><a>二年级下</a></li><li grade_id="9" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="三年级上"><a>三年级上</a></li><li grade_id="11" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="三年级下"><a>三年级下</a></li><li grade_id="14" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="四年级上"><a>四年级上</a></li><li grade_id="15" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="四年级下"><a>四年级下</a></li>                        <input type="hidden" value="1" id="gra">
                    </ul>
                </div>
                <div class="top-right">
                    <p class="ject">版本</p>
                    <img src="/nbc_schoolyard/PUBLIC/images/images.jpg" class="image">
                    <ul class="ject-ul" id="version">
                        <li version_id="4" style="cursor: pointer; border: 1px solid rgb(255, 0, 0); " title="人教版"><a>人教版</a></li><li version_id="5" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="北师大版"><a>北师大版</a></li><li version_id="6" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="北京版"><a>北京版</a></li><li version_id="7" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="苏教版"><a>苏教版</a></li><li version_id="8" style="cursor: pointer; border: 1px solid rgb(209, 209, 209); " title="冀教版"><a>冀教版</a></li>                            <input type="hidden" value="4" id="ver">
                    </ul>
                </div>
                <div style="clear:both"></div>
            </div>
            <div class="under" id="data">
                <div class="under-left" id="ajaxdata"><div class="text" id="chapter"><h3>第一单元</h3><p chapter_id="15" style="cursor: pointer; color: rgb(255, 0, 0); ">静夜思</p><p chapter_id="16" style="cursor: pointer; color: rgb(102, 101, 99); ">小小的船</p><p chapter_id="17" style="cursor: pointer; color: rgb(102, 101, 99); ">阳光</p><p chapter_id="18" style="cursor: pointer; color: rgb(102, 101, 99); ">影子</p><p chapter_id="19" style="cursor: pointer; color: rgb(102, 101, 99); ">比尾巴</p></div><div class="text" id="chapter"><h3>第二单元</h3><p chapter_id="20" style="cursor: pointer; color: rgb(102, 101, 99); ">小松鼠找花生</p><p chapter_id="21" style="cursor: pointer; color: rgb(102, 101, 99); ">雪地里的小画家</p><p chapter_id="22" style="cursor: pointer; color: rgb(102, 101, 99); ">借生日</p><p chapter_id="23" style="cursor: pointer; color: rgb(102, 101, 99); ">雪孩子</p><p chapter_id="24" style="cursor: pointer; color: rgb(102, 101, 99); ">小熊住山洞</p></div><div class="text" id="chapter"><h3>第三单元</h3><p chapter_id="25" style="cursor: pointer; color: rgb(102, 101, 99); ">我多想去看看</p><p chapter_id="27" style="cursor: pointer; color: rgb(102, 101, 99); ">雨点儿</p><p chapter_id="28" style="cursor: pointer; color: rgb(102, 101, 99); ">平平搭积木</p></div><div class="text" id="chapter"><h3>第四单元</h3><p chapter_id="29" style="cursor: pointer; color: rgb(102, 101, 99); ">比一比</p><p chapter_id="30" style="cursor: pointer; color: rgb(102, 101, 99); ">自选商场</p><p chapter_id="31" style="cursor: pointer; color: rgb(102, 101, 99); ">菜园里</p><p chapter_id="32" style="cursor: pointer; color: rgb(102, 101, 99); ">日月明</p></div></div>
                <div class="under-right">
                    <div class="up" id="teach">    <p class="up-p">教学目标</p>
    <div class="up-div">
        <div id="ini-aim" style="display: block; ">
            <pre><p name="aim"><pre>1．认识10个生字，会写生字“头”、“乡”、“光”、“故”，认识新偏旁“攵”; 
2．初步感受诗歌所描绘的美好意境，体会诗人的思乡之情，诵读时能做到正确、有感情。

3.的淡淡的淡淡的
sss
dddddddddd
dddd</pre></p></pre>
            <div class="compile"><a href="javascript:ShowElement('aim');">编辑</a></div>
        </div>
       <div id="textarea-aim" style="display: none; ">
           <textarea cols="90" id="text-aim" onblur="javascript:blurFuc(&quot;aim&quot;,&quot;15&quot;);">1．认识10个生字，会写生字“头”、“乡”、“光”、“故”，认识新偏旁“攵”; 
2．初步感受诗歌所描绘的美好意境，体会诗人的思乡之情，诵读时能做到正确、有感情。
3.的淡淡的淡淡的
sss
dddddddddd
dddd</textarea>
       </div>
    </div>
    <p class="up-p1">教学重点</p>
    <div class="up-div1">
        <div id="ini-keynote" style="display:block;">
            <pre><p name="keynote">1.会认１０个生字，写好４个字。有感情的诵读古诗。
2.kfdslajfdsaf</p></pre>
            <div class="compile"><a href="javascript:ShowElement('keynote');">编辑</a></div>
        </div>
        <div id="textarea-keynote" style="display:none;">
            <textarea cols="90" id="text-keynote" onblur="javascript:blurFuc(&quot;keynote&quot;,&quot;15&quot;);">1.会认１０个生字，写好４个字。有感情的诵读古诗。
2.kfdslajfdsaf</textarea>
       </div>
    </div>
    <p class="up-p2">教学难点</p>
    <div class="up-div2">
        <div id="ini-difficulty" style="display:block;">
            <pre><p name="difficulty">1.理解诗句的意思，体会意境。</p></pre>
            <div class="compile"><a href="javascript:ShowElement('difficulty');">编辑</a></div>
        </div>
        <div id="textarea-difficulty" style="display:none;">
            <textarea cols="90" id="text-difficulty" onblur="javascript:blurFuc(&quot;difficulty&quot;,&quot;15&quot;);">1.理解诗句的意思，体会意境。</textarea>
       </div>
    </div></div>
                    <div class="tab1">
                        <ul class="cur1">
                             <li class="cur2 current1" onclick="fileTypeChanged('all');">全部<span id="allcount">(4)</span></li>
                             <li class="cur3" onclick="fileTypeChanged('teachplan');">教案</li>
                             <li class="cur4" onclick="fileTypeChanged('courseware');">课件</li>
                             <li class="cur5" onclick="fileTypeChanged('example');">习题</li>
                        </ul>
                             <p class="new">排序：<!--<span>精品</span><span>免费</span><span>更多页数</span>--><span>最新</span></p>
                    </div>
                    <div class="tab-under">
                        <!--列表数据开始-->
                        <div id="filedata_id"><dl class="up-dl background"> 
<dt><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=142"><img width="50" height="50" src="/statics/images/main/type/word.gif"></a></dt> 
<dd class="up-dd"> 
<p class="warter"><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=142">《机械基础》课堂教学指导意见.doc</a></p> 
<p>简介：</p> 
<p>贡献者：<span>admin</span></p> 
<p>创建时间：2013-09-22 15:44:06</p> 
</dd> 
<dd class="up-dd1"> 
<p class="study"><span>36</span>人阅读</p> 
<a href="/index.php/operate/index?ct=pickcode&amp;ac=download&amp;pickcode=142" style="cursor:pointer"><img src="/nbc_schoolyard/PUBLIC/images/xia.png" style="float:left"></a><p class="all">0次</p> 
</dd> 
</dl> 
<dl class="up-dl background"> 
<dt><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=143"><img width="50" height="50" src="/statics/images/main/type/ppt.gif"></a></dt> 
<dd class="up-dd"> 
<p class="warter"><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=143">《秋天的怀念》教学配套用课件.ppt</a></p> 
<p>简介：</p> 
<p>贡献者：<span>admin</span></p> 
<p>创建时间：2013-09-22 15:44:07</p> 
</dd> 
<dd class="up-dd1"> 
<p class="study"><span>13</span>人阅读</p> 
<a href="/index.php/operate/index?ct=pickcode&amp;ac=download&amp;pickcode=143" style="cursor:pointer"><img src="/nbc_schoolyard/PUBLIC/images/xia.png" style="float:left"></a><p class="all">0次</p> 
</dd> 
</dl> 
<dl class="up-dl background"> 
<dt><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=321"><img width="50" height="50" src="/statics/images/main/type/excel.gif"></a></dt> 
<dd class="up-dd"> 
<p class="warter"><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=321">府学项目-实施工作记录单20130401.xls</a></p> 
<p>简介：</p> 
<p>贡献者：<span>maningbo</span></p> 
<p>创建时间：2013-09-26 14:10:35</p> 
</dd> 
<dd class="up-dd1"> 
<p class="study"><span>1</span>人阅读</p> 
<a href="/index.php/operate/index?ct=pickcode&amp;ac=download&amp;pickcode=321" style="cursor:pointer"><img src="/nbc_schoolyard/PUBLIC/images/xia.png" style="float:left"></a><p class="all">0次</p> 
</dd> 
</dl> 
<dl class="up-dl background"> 
<dt><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=326"><img width="50" height="50" src=""></a></dt> 
<dd class="up-dd"> 
<p class="warter"><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=326">NBC_2_0_setup.exe</a></p> 
<p>简介：</p> 
<p>贡献者：<span>zyingbo</span></p> 
<p>创建时间：2013-09-27 09:53:43</p> 
</dd> 
<dd class="up-dd1"> 
<p class="study"><span>1</span>人阅读</p> 
<a href="/index.php/operate/index?ct=pickcode&amp;ac=download&amp;pickcode=326" style="cursor:pointer"><img src="/nbc_schoolyard/PUBLIC/images/xia.png" style="float:left"></a><p class="all">0次</p> 
</dd> 
</dl> 
</div>
                        <!--列表数据结束-->
                        <!-- 分页链接开始-->
                        <div class="link" id="page_id"><span>          </span></div>
                        <!-- 分页链接结束-->
                     </div>
                </div>
            </div>
        </div>
         <div style="clear:both;"></div>
    </div>


<script type="text/javascript">
    var g_chapterId = $("#chapterid").val();
    var g_page = 1;
    var g_totalCount = 0;
    var g_fileType = '';
    var g_oldsubjectId = 0;
    var g_oldversionId = 0;
    var g_oldgradeId = 0;

    $(document).ready(function () {
        //  alert('初始化');
        subjectSelect(1);
        gradeSelect(1);
        versionSelect(4);
        chapterSelect(15);
        g_oldsubjectId = 1;
        g_oldversionId = 4;
        g_oldgradeId = 1;
        //alert(g_chapterId);
        //获取科目id值
        $('#subject li').each(function (e) {
            $(this).click(function () {
                subject_id = $('#subject li').eq(e).attr('subject_id');
                subjectSelect(subject_id);
                operate1();
            })
        })
        //获取年级id
        $('#grade li').each(function (e) {
            $(this).click(function () {
                grade_id = $('#grade li').eq(e).attr('grade_id');
                gradeSelect(grade_id);
                operate1();
            })
        })
        //获取版本id值
        $('#version li').each(function (e) {
            $(this).click(function () {
                version_id = $('#version li').eq(e).attr('version_id');
                versionSelect(version_id);
                operate1();
            })
        })
        operate();
    });

    //点击chapter触发
    function refreshTextDiv() {   //取得subjectid，grade，version，chapter，fileType
        var sub_id = parseInt($("#subj").attr("value"));
        var gra_id = parseInt($("#gra").attr("value"));
        var ver_id = parseInt($("#ver").attr("value"));
        var chapter_id = g_chapterId;

        //ajax取数据
        var strData = "chapter_id=" + chapter_id + "&subject_id=" + sub_id + "&grade_id=" + gra_id + "&version_id=" + ver_id;

        $.ajax({
            type: 'post',
            url: '/nbc_schoolyard/index.php/page/getText',
            data: strData,
            dataType: 'html',
            success: function (msg) {
                $("#teach").html(msg);
            }
        });
    }

    //取得数据内容，点击chapter触发，点击分页触发，点击filetype触发。
    function refreshDataDiv() {
        //alert('点击chapter触发');
        //取得subjectid，grade，version，chapter，fileType,page
        var sub_id = parseInt($("#subj").attr("value"));
        var gra_id = parseInt($("#gra").attr("value"));
        var ver_id = parseInt($("#ver").attr("value"));
        var chapter_id = g_chapterId;
        var page = g_page;
        var fileType = g_fileType;
        //ajax取数据
        var strData = "chapter_id=" + chapter_id + "&subject_id=" + sub_id + "&grade_id=" + gra_id + "&version_id=" + ver_id + "&file_type=" + fileType + "&p=" + page;
        $.ajax({
            type: 'post',
            url: '/nbc_schoolyard/index.php/page/getDataList',
            data: strData,
            dataType: 'html',
            success: function (msg) {
                //数据取到之后，拼接html字符串
                obj = $.parseJSON(msg);
                //把html放到DOM对象里面
                //alert(obj.data.datalist[0].file_name);
                var arrData = obj.data.datalist;
                var nLen = arrData.length;
                g_totalCount = obj.data.totalcount;
                $("#allcount").html("(" + obj.data.allcount + ")");
                var html = '';
                for (var i = 0; i < nLen; i++) {
                    html += '<dl class="up-dl background"> \n';
                    html += '<dt><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=' + arrData[i].file_id + '"><img width="50" height="50" src="' + arrData[i].image.small + '"/></a></dt> \n';
                    html += '<dd class="up-dd"> \n';
                    html += '<p class="warter"><a href="/nbc_schoolyard/index.php/search/getfileid?file_id=' + arrData[i].file_id + '">' + arrData[i].file_name + '</a></p> \n';
                    html += '<p>简介：' + arrData[i].file_desc + '</p> \n';
                    html += '<p>贡献者：<span>' + arrData[i].owner_id + '</span></p> \n';
                    html += '<p>创建时间：' + arrData[i].create_time + '</p> \n';
                    html += '</dd> \n';
                    html += '<dd class="up-dd1"> \n';
                    html += '<p class="study"><span>' + arrData[i].view_count + '</span>人阅读</p> \n';
                    html += '<a href="' + arrData[i].download + '"  style="cursor:pointer"><img src="/nbc_schoolyard/PUBLIC/images/xia.png"  style="float:left"/ ></a>'
                    html += '<p class="all">' + arrData[i].download_count + '次</p> \n';
                    html += '</dd> \n';
                    html += '</dl> \n';
                }
                $("#filedata_id").html(html);
                refreshPage();
                iframeAutoFit();
            }
        });
        //数据取到之后，拼接html字符串

        //把html放到div里面
    }

    function refreshPage() {
        //取得当前页面号,total count
        var page = g_page;
        var totalCount = g_totalCount;
        //ajax取数据
        var strData = "total_count=" + totalCount + "&p=" + page;
        $.ajax({
            type: 'post',
            url: '/nbc_schoolyard/index.php/page/getPageHtml',
            data: strData,
            dataType: 'html',
            success: function (msg) {
                //数据取到之后，拼接html字符串
                $("#page_id").html(msg);
                //把html放到DOM对象里面
            }
        });
        //写入page div
    }

    function pageChanged(page) {
        g_page = page;
        refreshDataDiv();
    }

    function fileTypeChanged(fileType) {
        g_fileType = fileType;
        refreshDataDiv();
    }

    //课程选择
    function subjectSelect(id) {
        var arrObj = $('#subject li');
        var subjectObj = null;
        arrObj.each(function (e) {
            subjectObj = $('#subject li').eq(e);
            subject_id = subjectObj.attr('subject_id');
            if (id == subject_id) {
                subjectObj.css("border", "1px solid #f00");
            } else {
                subjectObj.css("border", "1px solid #d1d1d1");
            }
        });
        $("#subj").attr("value", id);
    }
    //年级选择
    function gradeSelect(id) {
        var arrObj = $('#grade li');
        var gradeObj = null;
        arrObj.each(function (e) {
            gradeObj = $('#grade li').eq(e);
            grade_id = gradeObj.attr('grade_id');
            if (id == grade_id) {
                gradeObj.css("border", "1px solid #f00");
            } else {
                gradeObj.css("border", "1px solid #d1d1d1");
            }
        });
        $("#gra").attr("value", id);
    }
    //版本选择
    function versionSelect(id) {
        var arrObj = $('#version li');
        var versionObj = null;
        arrObj.each(function (e) {
            versionObj = $('#version li').eq(e);
            version_id = versionObj.attr('version_id');
            if (id == version_id) {
                versionObj.css("border", "1px solid #f00");
            } else {
                versionObj.css("border", "1px solid #d1d1d1");
            }
        });
        $("#ver").attr("value", id);
    }
    //菜单选择
    function chapterSelect(id) {
        var arrObj = $('#chapter p');
        var chapterObj = null;
        var chapter_id = 0;

        arrObj.each(function (e) {
            chapterObj = $('#chapter p').eq(e);
            chapter_id = chapterObj.attr('chapter_id');
            if (id == chapter_id) {
                chapterObj.css("color", "#f00");
            } else {
                chapterObj.css("color", "#666563");
            }
        });
    }

    function operate() {
        // alert('operate操作！');
        var sub_id = parseInt($("#subj").attr("value"));
        var gra_id = parseInt($("#gra").attr("value"));
        var ver_id = parseInt($("#ver").attr("value"));
        if (sub_id > 0 && gra_id > 0 && ver_id > 0) {
            $.ajax({
                type: 'post',
                url: '/nbc_schoolyard/index.php/page/gettree',
                data: "subject_id=" + sub_id + "&grade_id=" + gra_id + "&version_id=" + ver_id,
                dataType: 'html',
                success: function (msg) {
                    getChapterTree(msg);
                    chapterSelect(g_chapterId);
                    refreshTextDiv();
                    refreshDataDiv();
                    iframeAutoFit();
                    $('#chapter p').each(function (e) {
                        $(this).bind('click', function () {
                            chapter_id = $('#chapter p').eq(e).attr('chapter_id');
                            g_chapterId = chapter_id;
                            chapterSelect(chapter_id);
                            refreshTextDiv();
                            refreshDataDiv();
                            iframeAutoFit();
                        });
                    });
                }
            });
        }
    }

    function operate1() {
        var sub_id = parseInt($("#subj").attr("value"));
        var gra_id = parseInt($("#gra").attr("value"));
        var ver_id = parseInt($("#ver").attr("value"));
        if (sub_id > 0 && gra_id > 0 && ver_id > 0) {
            $.ajax({
                type: 'post',
                url: '/nbc_schoolyard/index.php/page/gettree',
                data: "subject_id=" + sub_id + "&grade_id=" + gra_id + "&version_id=" + ver_id,
                dataType: 'html',
                success: function (msg) {
                    if (msg == "emptyData") {
                        subjectSelect(g_oldsubjectId);
                        gradeSelect(g_oldgradeId);
                        versionSelect(g_oldversionId);
                        alert('无对应课程，请联系管理员添加！');
                        return false;
                    } else {
                        getChapterTree(msg);
                        g_oldsubjectId = sub_id;
                        g_oldgradeId = gra_id;
                        g_oldversionId = ver_id;
                        chapterid = $("#chapter p:first").attr('chapter_id');
                        g_chapterId = chapterid;
                        $('#chapter p').each(function (e) {
                            $(this).bind('click', function () {
                                chapter_id = $('#chapter p').eq(e).attr('chapter_id');
                                g_chapterId = chapter_id;
                                chapterSelect(chapter_id);
                                refreshTextDiv();
                                refreshDataDiv();
                                iframeAutoFit();
                            })
                        });
                        chapterSelect(g_chapterId);
                        refreshTextDiv();
                        refreshDataDiv();
                        iframeAutoFit();
                    }
                }
            });
        }
    }
    //ajax获取菜单树
    function getChapterTree(msg) {
        obj = $.parseJSON(msg);
        var arrData = obj.data.datalist;
        var nLen = arrData.length;
        var html = '';
        for (var i = 0; i < nLen; i++) {
            html += '<div class="text"  id="chapter">';
            html += '<h3>' + arrData[i].name + '</h3>';
            var chapterData = arrData[i].chapters;
            var chapterLen = chapterData.length;
            for (var j = 0; j < chapterLen; j++) {
                html += '<p chapter_id ="' + chapterData[j].id + '" style="cursor:pointer;">' + chapterData[j].name + '</p>';
            }
            html += '</div>';
        }
        $("#ajaxdata").html(html);
    }

    //点击编辑，文本变textarea
    function ShowElement(value) {
        $("#ini-" + value).hide();
        $("#textarea-" + value).show();
        $("#text-" + value).focus();
    }
    //失焦事件
    function blurFuc(name, chapterid) {
        var chapterid = parseInt(chapterid);
        var oldhtml = $('[name=' + name + ']').html();
        var values = $("#text-" + name).val();
        $("#ini-" + name).show();
        $("#textarea-" + name).hide();

        if (values != oldhtml) {
            var args = "name=" + name + "&chapter_id=" + chapterid + "&values=" + values;
            $.ajax({
                type: "POST",
                url: "/nbc_schoolyard/index.php/page/editajax",
                data: args,
                success: function (msg) {
                    if ($.trim(msg) == "success") {
                        $('[name=' + name + ']').html("<pre>" + values + "</pre>");
                        $("#ini-" + name).show();
                        $("#text-" + name).val(values);
                        $("#textarea-" + name).hide();
                        iframeAutoFit();
                    } else {
                        $("#ini-" + name).show();
                        $("#textarea-" + name).hide();
                        iframeAutoFit();
                    }
                }
            });
        } else {
            $("#ini-" + name).show();
        }
        iframeAutoFit();
    }
    function iframeAutoFit() {
        try {
            if (window != parent) {
                var a = parent.document.getElementsByTagName("iframe");
                for (var i = 0; i < a.length; i++) {
                    if (a[i].contentWindow == window) {
                        var h1 = 0, h2 = 0, d = document, dd = d.documentElement;
                        a[i].parentNode.style.height = a[i].offsetHeight + "px";
                        //                    alert(a[i].parentNode.style.height);
                        a[i].style.height = "10px";
                        if (dd && dd.scrollHeight) h1 = dd.scrollHeight;
                        if (d.body) h2 = d.body.scrollHeight;
                        var h = Math.max(h1, h2);
                        if (document.all) { h += 4; }
                        if (window.opera) { h += 1; }
                        a[i].style.height = a[i].parentNode.style.height = h + "px";
                    }
                }
            }
        } catch (ex) { }
    }
    </script></body></html>